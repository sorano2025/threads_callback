<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Threads Callback</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
<script>
  // Forward Threads OAuth params into the iOS app
  const url = new URL(window.location.href);
  const code = url.searchParams.get("code") || "";
  const state = url.searchParams.get("state") || "";
  const error = url.searchParams.get("error") || "";
  const error_description = url.searchParams.get("error_description") || "";

  const target = new URL("monday://threads_callback");
  if (code) target.searchParams.set("code", code);
  if (state) target.searchParams.set("state", state);
  if (error) target.searchParams.set("error", error);
  if (error_description) target.searchParams.set("error_description", error_description);

  // Kick into the app
  window.location.replace(target.toString());
</script>

<p>Redirecting back to the appâ€¦</p>
</body>
</html>
